<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Daniel Schwalbe">
        <link rel="canonical" href="https://info314.giantfirewall.com/assignments/lab2/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Lab 2 - Analyze DNS & HTTP in Wireshark - INFO 314 Course Resources</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/color-brewer.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">INFO 314 Course Resources</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">1 - Pi Setup</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../pi-setup/" class="dropdown-item">Raspberry Pi Setup</a>
</li>
            
<li>
    <a href="../networkd-setup/" class="dropdown-item">networkd Setup</a>
</li>
            
<li>
    <a href="../../resources/wifi-reference/" class="dropdown-item">Wifi Reference</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Labs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../lab1/" class="dropdown-item">Lab 1 - Core Technical Skills</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Lab 2 - Analyze DNS & HTTP in Wireshark</a>
</li>
                                    
<li>
    <a href="../lab3/" class="dropdown-item">Lab 3 - Analyzing DHCP and ARP with Wireshark</a>
</li>
                                    
<li>
    <a href="../lab4/" class="dropdown-item">Lab 4 - Analyze Zeroconf in Wireshark</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Guides</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/pi-materials/" class="dropdown-item">Getting Pi Materials</a>
</li>
            
<li>
    <a href="../../resources/digital-ocean/" class="dropdown-item">Digital Ocean Signup</a>
</li>
            
<li>
    <a href="../../resources/address-planning/" class="dropdown-item">Basic IP Address Planning</a>
</li>
            
<li>
    <a href="../../resources/wifi-reference/" class="dropdown-item">Linux Wireless Configuration</a>
</li>
            
<li>
    <a href="../../resources/ssh-agent/" class="dropdown-item">Using ssh-agent</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Quick Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/markdown/" class="dropdown-item">Intro to Markdown</a>
</li>
            
<li>
    <a href="../../resources/bash/" class="dropdown-item">Intro to Bash</a>
</li>
            
<li>
    <a href="../../resources/host-config/" class="dropdown-item">Mac/Win/Linux Networking</a>
</li>
            
<li>
    <a href="../../resources/wireshark-install/" class="dropdown-item">Install Wireshark</a>
</li>
            
<li>
    <a href="../../resources/tshark-install/" class="dropdown-item">Install TShark</a>
</li>
            
<li>
    <a href="../../resources/manage-dhcp/" class="dropdown-item">Troubleshooting DHCP</a>
</li>
            
<li>
    <a href="../../resources/dns-clients/" class="dropdown-item">Managing DNS Clients</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../contact/" class="nav-link">Contact Us</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../lab1/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../lab3/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/info314/website" class="nav-link">info314/website</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#lab-2-analyze-dns-http-in-wireshark" class="nav-link">Lab 2 - Analyze DNS &amp; HTTP in Wireshark</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#instructions" class="nav-link">Instructions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#part-i-website" class="nav-link">Part I - website</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#part-ii-dig" class="nav-link">Part II - dig</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#part-iii-dev-tools" class="nav-link">Part III - dev tools</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#part-iv-wireshark" class="nav-link">Part IV - Wireshark</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#starting-a-capture" class="nav-link">Starting a Capture</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#exploring-a-capture" class="nav-link">Exploring a Capture</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#narrowing-your-search" class="nav-link">Narrowing your Search</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#part-v-examining-dns-requests-in-wireshark" class="nav-link">Part V - Examining DNS requests in Wireshark</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="lab-2-analyze-dns-http-in-wireshark">Lab 2 - Analyze DNS &amp; HTTP in Wireshark<a class="headerlink" href="#lab-2-analyze-dns-http-in-wireshark" title="Permanent link">&para;</a></h1>
<p><a href="https://www.elegantthemes.com/blog/wp-content/uploads/2018/03/what-is-dns.png"><img alt="DNS image" src="https://www.elegantthemes.com/blog/wp-content/uploads/2018/03/what-is-dns.png" /></a></p>
<p><a href="https://canvas.uw.edu/courses/1434918/assignments/5995604/">Lab 2 Assignment page on Canvas</a></p>
<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>The purpose of this lab is two-fold: </p>
<ul>
<li>Students will gain hands on experience with DNS. </li>
<li>Students will become familiar with the basic functionalities of Wireshark, and to be able to capture and analyze network traffic.</li>
</ul>
<p>We highly recommend using search engines to help you find solutions. As usual, there will be multiple ways to complete this lab. Please use the template provided on Canvas to complete your lab report.</p>
<h1 id="instructions">Instructions<a class="headerlink" href="#instructions" title="Permanent link">&para;</a></h1>
<h2 id="part-i-website">Part I - website<a class="headerlink" href="#part-i-website" title="Permanent link">&para;</a></h2>
<p>Pick a popular website that has a lot of content on it. Ideally it should contain advertisements. You will be using it throughout this lab.</p>
<p><strong>Report</strong>: </p>
<ol>
<li>What website did you select?</li>
</ol>
<h2 id="part-ii-dig">Part II - dig<a class="headerlink" href="#part-ii-dig" title="Permanent link">&para;</a></h2>
<p>Before jumping into more complicated scenarios, we would like you to learn how to use the <strong><code>dig</code></strong> command as it is an incredibly helpful and simple tool.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We highly recommend that you use dig for this lab. If it's not installed already on your computer, we've provided some resources at <a href="/resources/dns-clients/#perform-dns-lookups-manually" target="_blank">Managing DNS clients</a> to help you get started. If you are using Windows, a dig .exe file you can download and install exists. Or, you could use your Digital Ocean droplet form Lab 1 and follow the Linux instructions for how to install <strong><code>dnsutils</code></strong>. Use <strong><code>dig</code></strong> to lookup the domain name of the website you selected. Open up a new tab in your browser and enter (one of) the IP address(es) returned by dig to discover where it will take you. If dig returned more than one address, open up a second tab and enter it now.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Don't panic if you receive an error instead of a live site. Some servers host more than one website and need the name to help route you to the right place. Try another site, e.g., uw.edu, and see if you get different results.</p>
</div>
<p><strong>Report</strong>: </p>
<ol start="2">
<li>
<p>What addresses did the dig command return? Copy dig results to your report (code block or screenshot).</p>
</li>
<li>
<p>What did you observe when you browsed to the IP addresses directly?</p>
</li>
<li>
<p>Aside from <strong>A</strong> records containing IP addresses, did you discover any other DNS records from your query? List at least 3 other record types that DNS manages (use Google to look up other kinds of records if your query returned less than 3 types!)</p>
</li>
<li>
<p>Look closely at the output of the <code>dig</code> command. How can you be sure that the query completed successfully? Identify the IP address of the server used to handle your query. If you used PowerShell's <code>Resolve-DnsName</code> then you won't see the server IP that answered your request. Instead use <code>ipconfig /all</code> and find the IP under <code>DNS Servers</code> under your network interface.</p>
</li>
</ol>
<h2 id="part-iii-dev-tools">Part III - dev tools<a class="headerlink" href="#part-iii-dev-tools" title="Permanent link">&para;</a></h2>
<p>Open up a new tab preferably in a chromium based browser (Chrome, Brave, etc...). Open up the dev tools (right click on page and click Inspect), and go to the <em>Network</em> option. </p>
<p>In that very same tab paste in your selected web page into the URL bar and click enter. You should see all of the <strong>GET</strong> and <strong>POST</strong> requests that the browser made for that webpage load up in the dev tools.</p>
<p>Right-click the header of the Network Log table and select Domain. The domain of each resource is now shown.</p>
<p><a href="https://developers.google.com/web/tools/chrome-devtools/network/imgs/tutorial/domain.png"><img alt="dev tools show domain" src="https://developers.google.com/web/tools/chrome-devtools/network/imgs/tutorial/domain.png" /></a></p>
<p>Take some time to scroll through the domains, files, and file types your website was requesting.</p>
<p><strong>Report</strong>: </p>
<ol start="6">
<li>
<p>From a quick glance what is the most common file type requested?</p>
</li>
<li>
<p>Approximately how many <em>domains</em> do you see in that list that don't matchup with the website domain you initially visited?</p>
</li>
<li>
<p>Why do you think this page is getting information from other websites?</p>
</li>
<li>
<p>If you had to guess, how many DNS requests do you think were sent in order to fully load this page?</p>
</li>
</ol>
<h2 id="part-iv-wireshark">Part IV - Wireshark<a class="headerlink" href="#part-iv-wireshark" title="Permanent link">&para;</a></h2>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Wireshark is a tool designed to record and observe the messages that are sent over a network and to provide an analyst with tools to understand and troubleshoot the protocols associated with those messages.</p>
<h2 id="starting-a-capture">Starting a Capture<a class="headerlink" href="#starting-a-capture" title="Permanent link">&para;</a></h2>
<p>Open Wireshark and locate the Capture section of the launch screen. This section contains an input field for configuring capture filters and a list of physical and virtual interfaces that can be used to capture packets.</p>
<p>To the right of each interface, you should notice an animated “sparkline” which indicates the level of activity on the associated network. You can launch a capture on your active interface (likely Wi-Fi or Ethernet) by double-clicking on the respective label. </p>
<p>If a capture filter was specified before you selected the interface, Wireshark ignores any packets that don't match the filter. If the filter input is empty, Wireshark records everything it sees on the wire. </p>
<p>Recording continues until you press the stop icon in the top toolbar or close the application.</p>
<h2 id="exploring-a-capture">Exploring a Capture<a class="headerlink" href="#exploring-a-capture" title="Permanent link">&para;</a></h2>
<p>By default, Wireshark will divide capture-related content among three panes:</p>
<ul>
<li>Packet List</li>
<li>Packet Details</li>
<li>Packet Bytes</li>
</ul>
<p>The <em>Packet List</em> displays all packets in the current capture, summarizing important details about traffic flow and the type of data contained in the packet. </p>
<p>The <em>Packet Details</em> view initially displays a layered summary of the protocols represented in the selected packet. A more detailed view of each protocol can be explored by clicking the arrow icons to the left of the summary. The order of the protocols in this view corresponds to the order in which each protocol’s header appears in the data frame. </p>
<p>The <em>Packet Bytes pane</em> can be useful for understanding the basic structure of raw network messages. As you navigate through the details in this view, Wireshark will highlight the corresponding bytes in the Packet Bytes pane.</p>
<h2 id="narrowing-your-search">Narrowing your Search<a class="headerlink" href="#narrowing-your-search" title="Permanent link">&para;</a></h2>
<p>If you have any software, particularly a web browser, running in the background, you'll notice that Wireshark can quickly accumulate a large list of packets. Fortunately, the software provides a variety of tools to help you more easily locate packets relevant to your search.</p>
<p>The packet list can be modified non-destructively by adding/removing <em>display filters</em><sup id="fnref:filters"><a class="footnote-ref" href="#fn:filters">2</a></sup> in the input field below the top toolbar. Display filters are a valuable analytic tool that allows you to remove noise and quickly focus on packets that match certain criteria.</p>
<p>In addition to writing your own display filters, you can access a variety of context-specific analysis tools by right clicking on any row of the Packet List or a field within the Packet Details pane. These tools can help you create a display filter based on the current packet or to investigate a conversation that spans multiple packets.</p>
<h2 id="part-v-examining-dns-requests-in-wireshark">Part V - Examining DNS requests in Wireshark<a class="headerlink" href="#part-v-examining-dns-requests-in-wireshark" title="Permanent link">&para;</a></h2>
<p>Before examining DNS requests in Wireshark, you will want to clear your DNS cache. </p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>As applications make DNS queries to obtain the IP addresses of remote  resources, your operating system will start to maintain a cache of  previous responses. These cached responses are used on subsequent  lookups in order to reduce network overhead and speed up the process of  loading the applicable resources.</p>
</div>
<p>Check the <a href="/resources/dns-clients/#view-or-clear-your-local-dns-cache" target="_blank">Managing DNS clients</a> resource for instructions on how to clear your DNS cache.</p>
<p>Create a capture of you visiting your website by: </p>
<ul>
<li>Open Wireshark, begin a capture</li>
<li>Quickly open a new tab and visit your website in your browser</li>
<li>Once it has fully loaded end your Wireshark capture.</li>
</ul>
<p>Now <strong>filter</strong> for DNS packets only in the display filter.</p>
<ul>
<li>Identify the DNS response containing the information you needed in order to convert your website name into an IP address.</li>
<li>Use the information contained within that packet for the following deliverable.</li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Learn how to use the search tool to find string content or research display filters that allow you to specify the domain name.</p>
</div>
<p><strong>Report</strong>: </p>
<ol start="10">
<li>Assuming almost all of the DNS requests you see in Wireshark right now are for the one website you visited, how many DNS requests do you see? </li>
<li>Overall were there less or more DNS queries than you'd expect?</li>
<li>How did you identify the DNS packet(s) associated with the website you visited?</li>
<li>Provide screenshots of the packet(s) (specifically of the DNS information in Packet Details).</li>
<li>List the ip addresses you received for the website from the DNS server that resolved your request.</li>
<li>
<p>Which <em>transport layer protocol</em> (think OSI model) is used to carry the DNS packet?</p>
</li>
<li>
<p>Compare this DNS response to others in the capture (generate more if needed).</p>
</li>
<li>Which port number(s) are shared in common across these DNS requests?</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:"></li>
<li id="fn:filters">
<p>Do not confuse display filters and capture filters. They serve very different purposes and even use distinct syntax.&#160;<a class="footnote-backref" href="#fnref:filters" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 Daniel Schwalbe</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
