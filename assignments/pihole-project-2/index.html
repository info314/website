<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Daniel Schwalbe">
        <link rel="canonical" href="https://info314.giantfirewall.com/assignments/pihole-project-2/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Part 2 - Installing the Pi-Hole Application - INFO 314 Course Resources</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/color-brewer.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">INFO 314 Course Resources</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">1 - Pi Setup</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../pi-setup/" class="dropdown-item">Raspberry Pi Setup</a>
</li>
            
<li>
    <a href="../networkd-setup/" class="dropdown-item">networkd Setup</a>
</li>
            
<li>
    <a href="../../resources/wifi-reference/" class="dropdown-item">Wifi Reference</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2 - Set up a DHCP Server</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../dhcp-setup/" class="dropdown-item">Installing and Configuring the ISC DHCP Server</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">3 - Configure Routing and NAT</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../router-setup/" class="dropdown-item">Router Setup</a>
</li>
            
<li>
    <a href="../../resources/iptables/" class="dropdown-item">Introduction to iptables</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">4 - Configure a DNS Resolver</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../resolver-setup/" class="dropdown-item">DNS Resolver Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">5 - Extra Credit - Build a Pi-Hole (Optional)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../pihole-project-1/" class="dropdown-item">Part 1 - Installing the Raspberry Pi OS</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Part 2 - Installing the Pi-Hole Application</a>
</li>
            
<li>
    <a href="../pihole-project-3/" class="dropdown-item">Part 3 - Installing the recursive DNS Server</a>
</li>
            
<li>
    <a href="../pihole-project-4/" class="dropdown-item">Part 4 - Make Pi-Hole work for you!</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Labs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../lab1/" class="dropdown-item">Lab 1 - Core Technical Skills</a>
</li>
                                    
<li>
    <a href="../lab2/" class="dropdown-item">Lab 2 - Analyze DNS & HTTP in Wireshark</a>
</li>
                                    
<li>
    <a href="../lab3/" class="dropdown-item">Lab 3 - Analyzing DHCP and ARP with Wireshark</a>
</li>
                                    
<li>
    <a href="../lab4/" class="dropdown-item">Lab 4 - Analyze Zeroconf in Wireshark</a>
</li>
                                    
<li>
    <a href="../lab5/" class="dropdown-item">Lab 5 - Analyze TCP with ncat and Wireshark</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Concepts and Theory</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../notes/dns-overview/" class="dropdown-item">Domain Name System (DNS)</a>
</li>
            
<li>
    <a href="../../notes/router-overview/" class="dropdown-item">Routers</a>
</li>
            
<li>
    <a href="../../notes/ethernet-switches/" class="dropdown-item">Ethernet Switches</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Guides</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/pi-materials/" class="dropdown-item">Getting Pi Materials</a>
</li>
            
<li>
    <a href="../../resources/digital-ocean/" class="dropdown-item">Digital Ocean Signup</a>
</li>
            
<li>
    <a href="../../resources/address-planning/" class="dropdown-item">Basic IP Address Planning</a>
</li>
            
<li>
    <a href="../../resources/iptables/" class="dropdown-item">Introduction to Iptables</a>
</li>
            
<li>
    <a href="../../resources/netfilter-hooks/" class="dropdown-item">Understanding Netfilter/Iptables Hooks</a>
</li>
            
<li>
    <a href="../../resources/wifi-reference/" class="dropdown-item">Linux Wireless Configuration</a>
</li>
            
<li>
    <a href="../../resources/zone-file-format/" class="dropdown-item">Zone File Reference</a>
</li>
            
<li>
    <a href="../../resources/vlans-and-dummies/" class="dropdown-item">Special Network Interfaces (VLANs and Dummies)</a>
</li>
            
<li>
    <a href="../../resources/configure-routing-links/" class="dropdown-item">Configuring Routing Links</a>
</li>
            
<li>
    <a href="../../resources/setup-wireguard/" class="dropdown-item">Install and Configure WireGuard</a>
</li>
            
<li>
    <a href="../../resources/setup-frr/" class="dropdown-item">Install Free Range Routing (FRR)</a>
</li>
            
<li>
    <a href="../../resources/ssh-agent/" class="dropdown-item">Using ssh-agent</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Configure an Authoritative Name Server</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../dns-zone-setup/" class="dropdown-item">Authoritative Zone Setup</a>
</li>
            
<li>
    <a href="../../resources/zone-file-format/" class="dropdown-item">DNS Zone Reference</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Quick Reference</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/markdown/" class="dropdown-item">Intro to Markdown</a>
</li>
            
<li>
    <a href="../../resources/bash/" class="dropdown-item">Intro to Bash</a>
</li>
            
<li>
    <a href="../../resources/host-config/" class="dropdown-item">Mac/Win/Linux Networking</a>
</li>
            
<li>
    <a href="../../resources/wireshark-install/" class="dropdown-item">Install Wireshark</a>
</li>
            
<li>
    <a href="../../resources/tshark-install/" class="dropdown-item">Install TShark</a>
</li>
            
<li>
    <a href="../../resources/manage-dhcp/" class="dropdown-item">Troubleshooting DHCP</a>
</li>
            
<li>
    <a href="../../resources/dns-clients/" class="dropdown-item">Managing DNS Clients</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../contact/" class="nav-link">Contact Us</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../pihole-project-1/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../pihole-project-3/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/info314/website" class="nav-link">info314/website</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#pi-hole-personal-rdns-server-appliance-setup-guide" class="nav-link">Pi-Hole &amp; Personal rDNS Server Appliance Setup Guide</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#part-2-installing-the-pi-hole-application" class="nav-link">Part 2: Installing the Pi-Hole Application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#the-pi-hole-project" class="nav-link">The Pi-Hole Project</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installing-the-pi-hole-application" class="nav-link">Installing the Pi-Hole Application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="pi-hole-personal-rdns-server-appliance-setup-guide">Pi-Hole &amp; Personal rDNS Server Appliance Setup Guide<a class="headerlink" href="#pi-hole-personal-rdns-server-appliance-setup-guide" title="Permanent link">&para;</a></h1>
<p><br></p>
<h2 id="part-2-installing-the-pi-hole-application">Part 2: Installing the Pi-Hole Application<a class="headerlink" href="#part-2-installing-the-pi-hole-application" title="Permanent link">&para;</a></h2>
<p><br></p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This guide will walk you through the steps necessary to install and configure a Pi-Hole on your Raspberry Pi, along with a personal recursive DNS server that will keep your DNS queries out of your ISP's immediate view. </p>
<p>The core sections of this guide are broken down into 4 parts:</p>
<ol>
<li><a href="/assignments/pihole-project-1">Installing the Raspberry Pi OS</a></li>
<li><strong>Installing the Pi-Hole Application</strong> (you are here)</li>
<li><a href="/assignments/pihole-project-3">Installing the recursive DNS Server</a></li>
<li><a href="/assignments/pihole-project-4">Make Pi-Hole work for you!</a></li>
</ol>
<p><br></p>
<h2 id="the-pi-hole-project">The Pi-Hole Project<a class="headerlink" href="#the-pi-hole-project" title="Permanent link">&para;</a></h2>
<p>A <a href="https://pi-hole.net/">Pi-Hole</a> is a Linux network-level advertisement and Internet tracker blocking application, which acts as a DNS sinkhole server intended for use on your private home network. The Pi-Hole application is specifically designed to run on low-power embedded devices with network capability, such as the Raspberry Pi.</p>
<p>Once properly configured and connected to your home network, you can change all of your client devices to use the Pi-Hole as their DNS Server (instead of the default DNS server, likely your wireless router). If you use a Pi-Hole as your DNS server while browsing the web, it will intercept DNS queries used for loading ads, and it will prevent those ads from being displayed on a web page. This makes for a much more pleasant (and faster!) web browsing experience.</p>
<div class="admonition instructions">
<p class="admonition-title">A bit of Planning Ahead</p>
<ul>
<li>For your Pi-Hole to work properly, it will need a static IP address on the same subnet that your wireless router uses to issue DHCP addresses. </li>
<li>Most modern home WiFi routers use /24 subnets, and use the .1 address as the gateway, the DHCP Server, and the DNS Server IP address. On many home WiFi routers, the default DHCP range doesn't start at the .2 address, but often at .10 or even .100. </li>
<li>In almost all cases, the exact DHCP range is configurable. If you are familiar with the admin interface of your home WiFi router, this will all be easy information to find. </li>
<li>Identify an IP address (aside from .1) that is not part of the DHCP range. If on your router, the DHCP range starts right at .2, you may need to edit the range by moving the lowest number from .2 to .6 or even .11, so you can use .5 or .10 for the Pi-Hole.</li>
</ul>
</div>
<p><br></p>
<h2 id="installing-the-pi-hole-application">Installing the Pi-Hole Application<a class="headerlink" href="#installing-the-pi-hole-application" title="Permanent link">&para;</a></h2>
<p>We will use the one-step automated install method as recommended by the folks at <a href="https://pi-hole.net">https://pi-hole.net</a> </p>
<p>Log into your Pi using SSH, and from the shell prompt, execute the following command :</p>
<pre class="highlight"><code class="language-bash">#Paste this into your shell prompt on your Pi

curl -sSL https://install.pi-hole.net | bash</code></pre>
<p><br></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By doing this, you are piping commands in a bash script hosted on the pi-hole.net website directly into your bash interpreter on your Pi. This is considered controversial, and a potential security risk, as you are unable to easily see the commands before they are executed. This could mean that malicious commands may be included. You can review the current install script here: <a href="https://install.pi-hole.net">https://install.pi-hole.net</a>. If this makes you uncomfortable, check <a href="https://github.com/pi-hole/pi-hole/#alternative-install-methods">https://github.com/pi-hole/pi-hole/#alternative-install-methods</a> for alternative install methods</p>
</div>
<h3 id="on-screen-setup-menu">On-Screen Setup Menu<a class="headerlink" href="#on-screen-setup-menu" title="Permanent link">&para;</a></h3>
<p>After the initial download and configuration finishes, you will be presented with a series of on-screen setup menus displayed in your SSH terminal window.</p>
<ul>
<li>Acknowledge the first three screens by pressing the Enter key on your keyboard (the <code>&lt;Ok&gt;</code> field is pre-selected and the only option). </li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you are presented with a screen that asks you to choose a network interface, be sure to select <code>eth0</code>, and NOT <code>wlan0</code>.</p>
</div>
<ul>
<li>
<p>Next, you will be asked to select an Upstream DNS Provider. Select Google, though <strong>this is only temporary</strong>, we won't actually be using Google in the long run (we will use our own local recursive resolver!) We just need to select something now to be able to continue with the setup. Navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
<li>
<p>The next screen deals with third party block lists. Leave the defaults selected, navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
<li>
<p>The following screen deals with the IPv4 and IPv6 protocols, leave both selected, navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
<li>
<p>Finally, the screen that lets you set the static IP address the Pi will use. It will be pre-filled with values derived from the DHCP lease your Pi obtained when it last booted up. You will be asked if you want to use your current settings (the ones you see displayed on your screen) and make them static.</p>
</li>
<li>
<p>In almost all cases, you will want to select <code>&lt;No&gt;</code>, so you can manually set the address you previously decided on.</p>
</li>
<li>
<p>After selecting <code>&lt;No&gt;</code> and pressing Enter, you will be given the opportunity to change the static IP address. It will be pre-filled with the values from DHCP, written in CIDR notation. Adjust the last octet to the number you previously decided on. Make sure that IP address is not part of your router's DHCP range. Navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
<li>
<p>On the next screen, you will be asked for the Default Gateway address. The pre-filled value, which came from DHCP, should be correct and you can navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
<li>
<p>Now you will see a screen that asks if you want to install the Web Admin Interface. Make sure "On" is selected,  navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
<li>
<p>This is followed by the question about installing the web server itself. Make sure "On" is selected,  navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
<li>
<p>The final two screens deal with logging DNS queries. You do want to log them, so make sure "On" is selected.</p>
</li>
<li>
<p>The last question is about which "privacy mode" to chose - how much detail gets logged for DNS queries. This can be changed later from the Web Admin interface, so chose "0 - Show everything" to start with, navigate to <code>&lt;Ok&gt;</code> and press Enter.</p>
</li>
</ul>
<p>This concludes the setup process via the SSH connection. The script will finish configuring everything, and this may take a little bit of time. When it finishes, you will see one more screen with login information.</p>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>Make sure to capture this information. Snapping a quick photo with your phone is a handy way to preserve the information until you can get the chance to change the password later.</p>
</div>
<p><br></p>
<h3 id="next-up-installing-the-recursive-dns-server">Next Up: <a href="/assignments/pihole-project-3">Installing the recursive DNS Server</a><a class="headerlink" href="#next-up-installing-the-recursive-dns-server" title="Permanent link">&para;</a></h3></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 Daniel Schwalbe</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
